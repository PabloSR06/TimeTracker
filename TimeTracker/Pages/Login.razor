@using TimeTracker.Service;
@inject Data.LoginState loginState;
@inject MySqlService service;

@if (loginState.IsLoggedIn.Equals(false))
{
        <h1>Login</h1>

        <div>
            <label>Username </label>
            <input id="UserName: " name="UserName" type="text" @bind-value="username" />
        </div>
        <div>
            <label>Password </label>
            <input id="Password" name="Password" type="password" @bind-value="password" />
        </div>
        <div>
            <button type="submit" @onclick=@HandleLogin>
                Submit
            </button>
        </div>

}
else
{

}

@code {

    string username = "";
    string password = "";
    string correctPassword = "admin";

    void HandleLogin()
    {
        if (password.Equals(correctPassword))
        {

            loginState.SetLogin(true, username);
            var userId = 1;
            loginState.collections = service.getUserHasColection(userId);
            loginState.projects = service.getUserHasProject(userId);

        }
    }
    void HandleLogout()
    {
        username = "";
        password = "";
        loginState.SetLogin(false, "");
    }
}