@page "/fetchdata"

<PageTitle>Weather forecast</PageTitle>

@using TimeTracker.Data
@using TimeTracker.Service;
@using TimeTracker.Models;
@inject WeatherForecastService ForecastService
@inject MySqlService service

<h1>Weather forecast</h1>

<p>This component demonstrates fetching data from a service.</p>

@if (checkTime.isOpen)
{
    if (!checkTime.time_table.isFinish)
    {
        <button class="btn btn-primary" @onclick="ClockOut">Finish</button>

    }

}
else
{
    <button class="btn btn-primary" @onclick="ClockIn">Start</button>
    
}

@code {
    private WeatherForecast[]? forecasts;

    private CheckTime checkTime = new CheckTime();

    ClockInModel clock_in = new ClockInModel()
        {
            user_id = 1,
            start_time = DateTime.Now.TimeOfDay,

        };

    ClockOutModel clockOut = new ClockOutModel()
    {
        user_id = 1,
        finish_time = DateTime.Now.TimeOfDay,

    };

    private async Task ClockIn()
    {
        checkTime = service.ClockIn(clock_in).Result;


    }
    private async Task ClockOut()
    {
        checkTime = service.ClockOut(clockOut).Result;


    }

    protected override async Task OnInitializedAsync()
    {
        
        checkTime = service.GetClockIn(clock_in.user_id, DateTime.Today);

        var z = "";

    }




}
